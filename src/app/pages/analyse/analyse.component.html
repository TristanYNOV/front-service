<main
  #analysisContainer
  data-testid="analysis-container"
  class="relative h-full w-full p-2"
  [class.layout-edit]="layoutEditMode.isEditMode()"
  [class.layout-locked]="!layoutEditMode.isEditMode()"
>
  <div
    appCdkDragResize
    appAnalysisPane
    [cdkDragBoundary]="analysisContainer"
    [cdkDragFreeDragPosition]="panePosition('video')"
    lockAspectRatio="16/9"
    (dragEnd)="onPaneDragEnd('video', $event)"
    (cdkResizeEnded)="onPaneResizeEnd('video', $event)"
    [ngStyle]="paneStyle('video')"
    data-testid="pane-video"
    class="bg-elevated border-layer absolute resize overflow-hidden rounded-md border shadow"
  >
    <app-video-display></app-video-display>
  </div>

  <div
    appCdkDragResize
    appAnalysisPane
    [cdkDragBoundary]="analysisContainer"
    [cdkDragFreeDragPosition]="panePosition('sequencer')"
    (dragEnd)="onPaneDragEnd('sequencer', $event)"
    (cdkResizeEnded)="onPaneResizeEnd('sequencer', $event)"
    [ngStyle]="paneStyle('sequencer')"
    data-testid="pane-sequencer"
    class="bg-elevated border-layer absolute resize overflow-auto rounded-md border shadow"
  >
    <app-sequencer-panel></app-sequencer-panel>
  </div>

  <div
    appCdkDragResize
    appAnalysisPane
    [cdkDragBoundary]="analysisContainer"
    [cdkDragFreeDragPosition]="panePosition('timeline')"
    (dragEnd)="onPaneDragEnd('timeline', $event)"
    (cdkResizeEnded)="onPaneResizeEnd('timeline', $event)"
    [ngStyle]="paneStyle('timeline')"
    data-testid="pane-timeline"
    class="bg-surface border-layer absolute resize overflow-auto rounded-md border shadow"
  >
    <app-timeline></app-timeline>
  </div>
</main>
